<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FrontendDto Form</title>
</head>
<body>
<h1>FrontendDto Form</h1>
<form id="searchForm">
    <label for="type">Type:</label>
    <input type="number" id="type" name="type" required><br><br>

    <label for="x">X:</label>
    <input type="number" id="x" name="x" step="any" required><br><br>

    <label for="y">Y:</label>
    <input type="number" id="y" name="y" step="any" required><br><br>

    <input type="submit" value="Submit">
</form>

<div id="results">
    <!-- 검색 결과가 여기에 표시될 예정 -->
</div>

<script>
        document.getElementById("searchForm").addEventListener("submit", function(event) {
            event.preventDefault();

            const formData = new FormData(event.target);
            const searchParams = new URLSearchParams(formData);

            const jsonData = JSON.stringify({
                type: formData.get("type"),
                x: formData.get("x"),
                y: formData.get("y")
            });

            fetch("/search-places", {
                method: "POST",
                body: jsonData,
                headers: {
                    "Content-Type": "application/json"
                }
            })
            .then(response => response.json())
            .then(data => {
                const resultsDiv = document.getElementById("results");
                resultsDiv.innerHTML = ""; // 기존 결과 지우기

                data.forEach(place => {
                    const placeDiv = document.createElement("div");
                    placeDiv.innerHTML = `
                        <p>ID: ${place.id}</p>
                        <p>Type: ${place.type}</p>
                        <p>Location: ${place.location}</p>
                        <p>Name: ${place.name}</p>
                        <p>Address: ${place.address}</p>
                        <p>Road Address: ${place.roadAddress}</p>
                        <p>Phone: ${place.phone}</p>
                        <p>URL: ${place.url}</p>
                        <p>X: ${place.x}</p>
                        <p>Y: ${place.y}</p>
                        <p>Image URL: ${place.imgUrl}</p>
                        <hr>
                    `;
                    resultsDiv.appendChild(placeDiv);
                });
            })
            .catch(error => console.error("Error:", error));
        });
    </script>
</body>
</html>